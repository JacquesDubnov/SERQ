/**
 * SERQ Theme System - CSS Custom Properties
 *
 * All style tokens defined here. Presets update these variables
 * via document.documentElement.style.setProperty()
 */

:root {
  /* ===== TYPOGRAPHY ===== */
  --font-body: Georgia, 'Times New Roman', serif;
  --font-heading: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, monospace;
  --font-size-base: 16px;
  --font-size-h1: 2rem;
  --font-size-h2: 1.5rem;
  --font-size-h3: 1.25rem;
  --font-size-h4: 1.125rem;
  --font-size-small: 0.875rem;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-bold: 700;
  --line-height-body: 1.6;
  --line-height-heading: 1.2;
  --letter-spacing-body: 0;
  --letter-spacing-heading: -0.02em;

  /* ===== COLORS (Light Mode Default) ===== */
  --color-text-primary: #1a1a1a;
  --color-text-secondary: #4b5563;
  --color-text-muted: #9ca3af;
  --color-bg-page: #f5f5f5;
  --color-bg-canvas: #ffffff;
  --color-bg-surface: #f3f4f6;
  --color-bg-elevated: #ffffff;
  --color-accent: #2563eb;
  --color-accent-hover: #1d4ed8;
  --color-accent-muted: #dbeafe;
  --color-border: #e5e7eb;
  --color-border-strong: #d1d5db;
  --color-highlight: #fef08a;
  --color-link: #2563eb;
  --color-link-hover: #1d4ed8;
  --color-code-bg: #f3f4f6;
  --color-code-text: #1a1a1a;
  --color-blockquote-border: #d1d5db;
  --color-blockquote-text: #4b5563;
  --color-selection: rgba(37, 99, 235, 0.2);
  --color-focus-ring: rgba(37, 99, 235, 0.5);

  /* Toolbar specific */
  --color-toolbar-bg: #ffffff;
  --color-toolbar-border: #e5e7eb;
  --color-toolbar-button: #4b5563;
  --color-toolbar-button-hover: #1a1a1a;
  --color-toolbar-button-active: #2563eb;
  --color-toolbar-button-bg-hover: #f3f4f6;
  --color-toolbar-button-bg-active: #dbeafe;
  --color-toolbar-divider: #e5e7eb;
  --color-toolbar-input-bg: transparent;
  --color-toolbar-input-text: #1a1a1a;
  --color-toolbar-input-border: #e5e7eb;

  /* ===== CANVAS BACKGROUND ===== */
  --canvas-bg-color: var(--color-bg-canvas);
  --canvas-bg-image: none;
  --canvas-bg-size: auto;
  --canvas-bg-position: center;
  --canvas-bg-repeat: no-repeat;
  --canvas-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  --canvas-border-radius: 0;

  /* ===== LAYOUT ===== */
  --layout-text-align: left;
  --layout-paragraph-spacing: 1rem;
  --layout-paragraph-indent: 0;
  --layout-line-spacing: 1.6;
  --layout-margin-top: 2rem;
  --layout-margin-bottom: 2rem;
  --layout-margin-left: 2rem;
  --layout-margin-right: 2rem;
  --layout-page-max-width: 720px;
  --layout-page-padding: 2rem;
  --layout-list-indent: 1.5rem;
  --layout-blockquote-indent: 1rem;
  --layout-heading-margin-top: 1.5em;
  --layout-heading-margin-bottom: 0.5em;
}

/* ===== DARK MODE ===== */
:root[data-theme="dark"] {
  /* Colors */
  --color-text-primary: #f5f5f5;
  --color-text-secondary: #a1a1aa;
  --color-text-muted: #71717a;
  --color-bg-page: #18181b;
  --color-bg-canvas: #1f1f23;
  --color-bg-surface: #27272a;
  --color-bg-elevated: #3f3f46;
  --color-accent: #3b82f6;
  --color-accent-hover: #60a5fa;
  --color-accent-muted: #1e3a5f;
  --color-border: #3f3f46;
  --color-border-strong: #52525b;
  --color-highlight: #854d0e;
  --color-link: #60a5fa;
  --color-link-hover: #93c5fd;
  --color-code-bg: #27272a;
  --color-code-text: #f5f5f5;
  --color-blockquote-border: #52525b;
  --color-blockquote-text: #a1a1aa;
  --color-selection: rgba(59, 130, 246, 0.3);
  --color-focus-ring: rgba(59, 130, 246, 0.5);

  /* Toolbar */
  --color-toolbar-bg: #27272a;
  --color-toolbar-border: #3f3f46;
  --color-toolbar-button: #a1a1aa;
  --color-toolbar-button-hover: #f5f5f5;
  --color-toolbar-button-active: #60a5fa;
  --color-toolbar-button-bg-hover: #3f3f46;
  --color-toolbar-button-bg-active: #1e3a5f;
  --color-toolbar-divider: #3f3f46;
  --color-toolbar-input-bg: transparent;
  --color-toolbar-input-text: #f5f5f5;
  --color-toolbar-input-border: #52525b;

  /* Canvas */
  --canvas-bg-color: #1f1f23;
  --canvas-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* ===== APPLY VARIABLES TO EDITOR ===== */
.tiptap {
  font-family: var(--font-body);
  font-size: var(--font-size-base);
  /* Use layout-line-spacing if set, fall back to line-height-body */
  line-height: var(--layout-line-spacing, var(--line-height-body));
  letter-spacing: var(--letter-spacing-body);
  color: var(--color-text-primary);
  text-align: var(--layout-text-align);
}

.tiptap h1,
.tiptap h2,
.tiptap h3,
.tiptap h4,
.tiptap h5,
.tiptap h6 {
  font-family: var(--font-heading);
  line-height: var(--line-height-heading);
  letter-spacing: var(--letter-spacing-heading);
  margin-top: var(--layout-heading-margin-top);
  margin-bottom: var(--layout-heading-margin-bottom);
}

.tiptap h1 { font-size: var(--font-size-h1); }
.tiptap h2 { font-size: var(--font-size-h2); }
.tiptap h3 { font-size: var(--font-size-h3); }
.tiptap h4 { font-size: var(--font-size-h4); }

.tiptap p {
  margin-top: 0;
  margin-bottom: var(--layout-paragraph-spacing, 1rem);
  text-indent: var(--layout-paragraph-indent, 0);
}

.tiptap code {
  font-family: var(--font-mono);
  background: var(--color-code-bg);
  color: var(--color-code-text);
  padding: 0.2em 0.4em;
  border-radius: 4px;
  font-size: 0.9em;
}

.tiptap pre {
  font-family: var(--font-mono);
  background: var(--color-code-bg);
  color: var(--color-code-text);
  padding: 1rem;
  border-radius: 8px;
  overflow-x: auto;
}

.tiptap blockquote {
  border-left: 3px solid var(--color-blockquote-border);
  padding-left: var(--layout-blockquote-indent);
  color: var(--color-blockquote-text);
  margin: 1rem 0;
}

.tiptap a {
  color: var(--color-link);
  text-decoration: underline;
}

.tiptap a:hover {
  color: var(--color-link-hover);
}

.tiptap ul,
.tiptap ol {
  padding-left: var(--layout-list-indent);
  margin: 1rem 0;
}

.tiptap ::selection {
  background: var(--color-selection);
}

.tiptap mark {
  background: var(--color-highlight);
  padding: 0.1em 0.2em;
  border-radius: 2px;
}
