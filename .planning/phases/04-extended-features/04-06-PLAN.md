---
phase: 04-extended-features
plan: 06
type: execute
wave: 3
depends_on: ["04-01", "04-02", "04-03", "04-04", "04-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All Phase 4 success criteria verified by human"
    - "Tables fully functional with all operations"
    - "Command palette and slash commands working"
    - "Document outline with heading navigation"
    - "Callout blocks with color and collapse"
    - "Images with insertion and resize"
---

<objective>
Human verification of all Phase 4 success criteria.

Purpose: Confirm all extended features work correctly before moving to Phase 5.

Output: Verified Phase 4 or list of issues to address.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-extended-features/04-01-SUMMARY.md
@.planning/phases/04-extended-features/04-02-SUMMARY.md
@.planning/phases/04-extended-features/04-03-SUMMARY.md
@.planning/phases/04-extended-features/04-04-SUMMARY.md
@.planning/phases/04-extended-features/04-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    **Phase 4 Extended Features - All Core Capabilities**

    **Tables (04-01):**
    - Insert table with dimension picker
    - Add/remove rows and columns
    - Merge and split cells
    - Resize columns
    - Toggle header row
    - Cell background colors
    - Border controls

    **Command System (04-02):**
    - Command palette (Cmd+K / Cmd+P)
    - Slash commands (/ trigger)
    - Keyboard shortcut hints
    - Full command filtering

    **Document Outline (04-03):**
    - Heading extraction
    - Outline panel with hierarchy
    - Click-to-navigate
    - Command palette heading jump

    **Callout Blocks (04-04):**
    - Insert via toolbar and /callout
    - 8 color options
    - Optional icons
    - Collapsible toggle
    - Light/dark mode support

    **Images (04-05):**
    - Drag/drop insertion
    - Paste insertion
    - /image slash command
    - Corner-handle resize
    - Alignment controls
    - Large file warning
  </what-built>

  <how-to-verify>
    Start the dev server: `npm run tauri dev`

    **Test 1: Tables**
    1. Click table button in toolbar, select 4x3 dimensions
    2. Table appears with 4 columns, 3 rows
    3. Type content in cells
    4. Drag column border to resize
    5. Right-click, add row below
    6. Right-click, toggle header row (first row styles differently)
    7. Select 2 adjacent cells, right-click, merge cells
    8. Right-click merged cell, split cell
    9. Right-click, change cell background color
    - [ ] All table operations work correctly

    **Test 2: Command Palette**
    1. Press Cmd+K - palette opens
    2. Type "bold" - Bold command appears with Cmd+B hint
    3. Press Escape - palette closes
    4. Press Cmd+P - palette opens (alternative shortcut)
    5. Type "table" - Insert Table command appears
    6. Select it - table inserted
    - [ ] Command palette works with filtering and shortcuts

    **Test 3: Slash Commands**
    1. In empty line, type "/" - dropdown appears
    2. Type "h2" - Heading 2 filtered
    3. Press Enter - line becomes H2
    4. Type "/quote" - blockquote option
    5. Select - blockquote inserted
    6. Type "/table" - table option
    - [ ] Slash commands trigger and filter correctly

    **Test 4: Document Outline**
    1. Create H1 "Introduction", H2 "Background", H3 "Details"
    2. Press Cmd+Shift+O - outline panel opens
    3. See 3 headings with hierarchy (H3 indented under H2)
    4. Click "Background" - cursor jumps there
    5. Open command palette, type heading text
    6. Select from "Jump to" section - navigates to heading
    - [ ] Outline shows hierarchy and navigation works

    **Test 5: Callout Blocks**
    1. Click callout button in toolbar - blue callout appears
    2. Type content inside callout
    3. Right-click, change color to green
    4. Right-click, add icon
    5. Right-click, enable collapsible
    6. Click collapse button - content hides
    7. Click expand - content shows
    8. Toggle dark mode - callout color adapts
    - [ ] Callouts work with all options

    **Test 6: Images**
    1. Drag image file from Finder into editor
    2. Image appears in document
    3. Copy image in browser, paste into editor
    4. Type "/image", select, pick file
    5. Click image - see blue outline and resize handle
    6. Drag corner handle - image resizes (aspect ratio maintained)
    7. Click alignment buttons - image moves left/center/right
    8. Try >2MB image - warning dialog appears
    - [ ] All image insertion methods and resize work

    **Test 7: Integration**
    1. Create document with: text, table, callout, images, headings
    2. Save document (Cmd+S)
    3. Close and reopen
    4. All content preserved including styles
    5. Check outline still works
    6. Check table operations still work
    - [ ] All features work together and persist

    **Test 8: Performance**
    1. Add several images and tables
    2. Scroll through document
    3. Type text quickly
    4. Open/close command palette rapidly
    - [ ] No lag or stutter observed
  </how-to-verify>

  <resume-signal>
    Type "Phase 4 verified" if all checks pass.

    If issues found, list them with:
    - What failed
    - Expected behavior
    - Actual behavior
  </resume-signal>
</task>

</tasks>

<verification>
Human has confirmed all Phase 4 success criteria:
1. Tables with full operations (create, row/column ops, merge/split, resize, colors)
2. Command palette with Cmd+K/Cmd+P, filtering, shortcut hints
3. Slash commands with / trigger and block insertion
4. Document outline with heading hierarchy and navigation
5. Callout blocks with colors, icons, collapse
6. Images with all insertion methods, resize, alignment
</verification>

<success_criteria>
All Phase 4 success criteria verified by human tester:
- [ ] User can create tables with all operations
- [ ] User can insert callout blocks with color/icon/collapse
- [ ] User can add images and resize/position them
- [ ] User can trigger command palette with Cmd+K
- [ ] User can use slash commands with /
- [ ] User can view outline and navigate to headings
</success_criteria>

<output>
After completion, create `.planning/phases/04-extended-features/04-06-SUMMARY.md`
</output>
